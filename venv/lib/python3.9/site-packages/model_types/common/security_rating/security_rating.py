from typing import ClassVar, Optional

from pydantic import BaseModel, validator
from pydantic.types import conint


class SecurityRating(BaseModel):
    class Config:
        validate_assignment = True

    AVG_RATING: ClassVar[int] = 50
    rating: Optional[conint(ge=0, le=100)] = AVG_RATING

    @validator("rating")
    def set_rating(cls, value):
        if value == 0:
            return 0
        return value or cls.AVG_RATING
